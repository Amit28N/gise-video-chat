{"version":3,"sources":["webpack://chat/./public_html/assets/ts/app.ts","webpack://chat/./public_html/assets/ts/Exchange/Firebase.ts","webpack://chat/./public_html/assets/ts/Partner/Partner.ts","webpack://chat/./public_html/assets/ts/Communication/WebRTC.ts","webpack://chat/./public_html/assets/ts/Elements/Userinfo.ts","webpack://chat/./public_html/assets/ts/Utils/Cookie.ts","webpack://chat/./public_html/assets/ts/Elements/Video.ts","webpack://chat/./public_html/assets/ts/Elements/PartnerListElement.ts","webpack://chat/./public_html/assets/ts/Elements/Controls.ts","webpack://chat/./public_html/assets/ts/Elements/Screen.ts","webpack://chat/./public_html/assets/ts/Elements/Devices.ts","webpack://chat/./public_html/assets/ts/Elements/Textchat.ts","webpack://chat/./public_html/assets/ts/Database/IndexedDB.ts","webpack://chat/./public_html/assets/ts/Elements/Videogrid.ts","webpack://chat/./public_html/assets/ts/Elements/Lightbox.ts","webpack://chat/webpack/bootstrap","webpack://chat/webpack/runtime/define property getters","webpack://chat/webpack/runtime/hasOwnProperty shorthand","webpack://chat/webpack/runtime/make namespace object","webpack://chat/webpack/startup"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["import { IExchange } from \"./Exchange/IExchange\";\nimport { Firebase } from \"./Exchange/Firebase\";\nimport { ICommunication } from \"./Communication/ICommunication\";\nimport { WebRTC } from \"./Communication/WebRTC\";\nimport { IPartner } from \"./Partner/IPartner\";\nimport { IPartners } from \"./Partner/IPartners\";\nimport { Partner } from \"./Partner/Partner\";\nimport { Controls } from \"./Elements/Controls\";\nimport { Screen } from \"./Elements/Screen\";\nimport { Devices } from \"./Elements/Devices\";\nimport { Textchat } from \"./Elements/Textchat\";\nimport { Videogrid } from \"./Elements/Videogrid\";\nimport { Video } from \"./Elements/Video\";\nimport { PartnerListElement } from \"./Elements/PartnerListElement\";\nimport { Userinfo } from \"./Elements/Userinfo\";\nimport { Lightbox } from \"./Elements/Lightbox\";\nimport { JQueryUtils } from \"./Utils/JQuery\";\n\nexport class App{\n\n    room: string;\n    yourId: number = Math.floor(Math.random()*1000000000);\n    yourName: string;\n    exchange: IExchange;\n    communication: ICommunication;\n    yourVideo: HTMLElement;\n    listener: boolean = false;\n    localStream: any;\n    localScreenStream: any;\n    partners: IPartners = {};\n    controls: Controls;\n    screen: Screen;\n    devices: Devices;\n    textchat: Textchat;\n    userinfo: Userinfo;\n    videogrid: Videogrid;\n    lightbox: Lightbox;\n    closed: boolean = false;\n    called: boolean = false;\n    yourVideoElement: Video;\n    partnerListElement: PartnerListElement;\n\n    constructor(){\n        this.setRoom();\n        console.log(\"Id: \" + this.yourId + \" Room: \" + this.room);\n        this.yourVideo = document.getElementById(\"yourVideo\");\n        this.exchange = new Firebase(this.room, this.yourId);\n        this.exchange.addReadEvent(this.readMessage);\n        this.yourVideoElement = new Video(document.getElementById(\"yourVideoArea\"), null);\n        this.partnerListElement = new PartnerListElement(null);\n        this.controls = new Controls(this);\n        this.screen = new Screen(this);\n        this.devices = new Devices(this);\n        this.textchat = new Textchat(this);\n        this.userinfo = new Userinfo(this);\n        this.lightbox = new Lightbox(this);\n        this.videogrid = new Videogrid();\n        this.videogrid.init();\n        $(window).on(\"beforeunload\", function() { \n            app.hangOut();\n        });\n    }\n\n    run(){ \n        setTimeout(function(){\n            if(!app.called){\n                app.callOther(); \n            }\n        }, 1000);\n        \n        navigator.mediaDevices.enumerateDevices().then(function(deviceInfos){\n            app.devices.gotDevices(deviceInfos);\n        });\n    }\n\n    setRoom(): void{\n        if (!location.hash) {\n            location.hash = Math.floor(Math.random() * 0xFFFFFF).toString(16);\n        }\n        this.room = location.hash.substring(1);\n        window.onhashchange = function() {\n            location.reload();\n        }\n    }\n\n    initialCamera(first: boolean = false) {\n        const constraints = {\n            audio: {deviceId: this.devices.devicesVueObject.audio ? {exact: this.devices.devicesVueObject.audio} : undefined},\n            video: {deviceId: this.devices.devicesVueObject.video ? {exact: this.devices.devicesVueObject.video} : undefined}\n        };\n        if(this.localStream){\n            this.localStream.getTracks().forEach(track => track.stop());\n        }\n        navigator.mediaDevices.getUserMedia(constraints)\n            .then(function(stream){\n                app.setAsListener(false);\n                if(!app.screen.onScreenMode()){\n                    // @ts-ignore\n                    app.yourVideo.srcObject = stream;\n                }\n                app.localStream = stream;\n                app.controls.initialiseStream();\n                app.setStreamToPartners();\n                \n                if(first){\n                    if(!app.called){\n                        app.callOther();  \n                    }else{\n                        app.reloadConnections();  \n                    }\n                }\n            })\n            .catch(function(err) {\n                alert(\"Es kann leider nicht auf die Kamera zugegriffen werden! \\nSie sind daher nur als Zuhörer dabei!\");\n                app.setAsListener(true);\n                if(!app.called){\n                    app.callOther(); \n                }\n                console.log(err);\n            });\n    }\n\n    callOther(){\n        this.called = true;\n        this.exchange.sendMessage({'call': this.yourId});\n    }\n\n    readMessage(sender: number, dataroom: string, msg) {\n        if(app !== undefined && !this.closed){\n            console.log(\"Exchange message from: \" + sender)\n            console.log(msg)\n            if (!(sender in app.partners) && (msg.call !== undefined || msg.sdp !== undefined))\n            {\n                app.addPartner(sender);\n            }\n            if((sender in app.partners) && app.partners[sender]){\n                var partnerConnection = app.partners[sender].connection;\n                if (msg.call !== undefined)\n                {\n                    app.partners[sender].createOffer(true);\n                }\n                else if (msg.closing !== undefined)\n                {\n                    app.partners[sender].closeConnection();\n                    delete app.partners[sender];\n                }\n                else if (msg.ice !== undefined)\n                {\n                    partnerConnection.addIceCandidate(new RTCIceCandidate(msg.ice));\n                }\n                else if (msg.sdp.type === \"offer\")\n                {\n                    app.partners[sender].createAnswer(msg.sdp);\n                }\n                else if (msg.sdp.type === \"answer\")\n                {\n                    partnerConnection.setRemoteDescription(new RTCSessionDescription(msg.sdp));\n                }\n            }\n        }\n    }\n\n    addPartner(partnerId: number){\n        var cla = this;\n        if(partnerId in app.partners){\n            this.partners[partnerId].closeConnection();\n            delete this.partners[partnerId];\n        }\n        this.partners[partnerId] = null;\n        this.partners[partnerId] = new Partner(partnerId, this.exchange, this.devices, this.textchat, this.videogrid, this.partnerOnConnected, this.partnerOnConnectionClosed, this.partnerOnConnectionLosed); \n        this.setStreamToPartner(this.partners[partnerId], true);\n        this.videogrid.recalculateLayout();\n    }\n\n    partnerOnConnected(partner: IPartner){\n        app.setStreamToPartner(partner);\n    }\n\n    partnerOnConnectionLosed(partner: IPartner){\n    }\n\n    partnerOnConnectionClosed(partner: IPartner){\n        if(partner.id in app.partners){\n            delete this.partners[partner.id];\n        }\n    }\n\n    setStreamToPartners(){\n        for (var id in this.partners) {\n            this.setStreamToPartner(this.partners[id]);\n        }\n    }\n\n    reloadConnections(){\n        for (var id in this.partners) {\n            this.partners[id].reloadConnection();\n        }\n    }\n\n    setStreamToPartner(partner: IPartner, initial: boolean = false){\n        if(app.localStream){\n            var videoTrack = !app.screen.onScreenMode() ? app.localStream.getVideoTracks()[0] : app.localScreenStream.getVideoTracks()[0];\n            var audioTrack = app.localStream.getAudioTracks()[0];\n            app.setTrackToPartner(partner, app.localStream, videoTrack);\n            app.setTrackToPartner(partner, app.localStream, audioTrack);\n        } else if(app.localScreenStream){\n            var videoTrack = app.localScreenStream.getVideoTracks()[0];\n            //var audioTrack = app.localScreenStream.getAudioTracks()[0];\n            app.setTrackToPartner(partner, app.localScreenStream, videoTrack);\n            //app.setTrackToPartner(partner, app.localScreenStream, audioTrack);\n        }\n        partner.sendMessage(app.userinfo.getUserInfo());\n    }\n\n    setTrackToPartner(partner: IPartner, stream: any, track: any){\n        var sender = partner.connection.getSenders().find(function(s) {\n            return s.track && track && s.track.kind == track.kind;\n        });\n        if(sender){\n            sender.replaceTrack(track);\n        } else {\n            partner.connection.addTrack(track, stream);\n        }\n    }\n\n    sendMessageToAllPartners(message: any){\n        for (var id in this.partners) {\n            if(this.partners[id]){\n                this.partners[id].sendMessage(message);\n            }\n        }\n    }\n\n    sidebarToogle(open: boolean){\n        $(\".maincontainer\").toggleClass(\"opensidebar\"); \n        this.textchat.scrollToBottom();\n        this.videogrid.recalculateLayout();\n    }\n\n    setAsListener(listener: boolean){\n        this.listener = listener;\n        this.yourVideoElement.videoVueObject.listener = listener;\n        this.partnerListElement.partnerListElementVueObject.listener = listener;\n    }\n\n    hangOut(){\n        this.closed = true;\n        this.exchange.sendMessage({'closing': this.yourId});\n        this.exchange.closeConnection();\n        for (var id in this.partners) {\n            if(this.partners[id]){\n                this.partners[id].closeConnection();\n            }\n        }\n    }\n}\n\nvar app = new App();\napp.run();","\nimport { IExchange } from \"./IExchange\";\n\ndeclare var firebase: any; \n\nexport class Firebase implements IExchange{\n\n    firebaseConfig = { \n        apiKey: \"AIzaSyBgaQ4Oi6fs93dJTaS1r_D5E1VAwfYfuRU\",\n        authDomain: \"chat-f4460.firebaseapp.com\",\n        databaseURL: \"https://chat-f4460-default-rtdb.europe-west1.firebasedatabase.app\",\n        projectId: \"chat-f4460\",\n        storageBucket: \"chat-f4460.appspot.com\",\n        messagingSenderId: \"616248470443\",\n        appId: \"1:616248470443:web:55307f2a3d26a11aa640ee\",\n        measurementId: \"G-P11BZ3TF99\"\n    };\n\n    database: any;\n    room: string;\n    yourId: number;\n    readCallback: (sender: number, dataroom: string, msg: any) => void;\n\n    constructor(room: string, yourId: number){\n        this.room = room;\n        this.yourId = yourId;\n        firebase.initializeApp(this.firebaseConfig);\n        firebase.analytics();\n        this.database = firebase.database().ref();\n    }\n\n    \n    sendMessage(data: any, receiver: number = 0): void{\n        console.log(\"Exchange message to: \" + (receiver !== 0 ? receiver : 'all'))\n        console.log(data)\n        var msg = this.database.push({ room: this.room, sender: this.yourId, receiver: receiver, message: JSON.stringify(data) });\n        msg.remove();\n    }\n\n    readMessage(data, cla) {\n        var msg = JSON.parse(data.val().message);\n        var sender = data.val().sender;\n        var receiver = data.val().receiver;\n        var dataroom = data.val().room;\n        if (dataroom === cla.room && sender !== cla.yourId && (receiver == 0 || receiver == cla.yourId)) {\n            cla.readCallback(sender, dataroom, msg);\n        }\n    }\n \n    addReadEvent(callback: (sender: number, dataroom: string, msg: any) => void): void{\n        this.readCallback = callback;\n        let cla = this;\n        this.database.on('child_added', function(data: any) {\n            cla.readMessage(data, cla)\n        });\n    }\n\n    closeConnection(): void{\n        this.database.off();\n    }\n\n}","import { IPartner } from \"./IPartner\";\nimport { WebRTC } from \"../Communication/WebRTC\";\nimport { IExchange } from \"../Exchange/IExchange\";\nimport { JQueryUtils } from \"../Utils/JQuery\";\nimport { Devices } from \"../Elements/Devices\";\nimport { Textchat } from \"../Elements/Textchat\";\nimport { Userinfo } from \"../Elements/Userinfo\";\nimport { Videogrid } from \"../Elements/Videogrid\";\nimport { Video } from \"../Elements/Video\";\nimport { PartnerListElement } from \"../Elements/PartnerListElement\";\n\n\nexport class Partner implements IPartner{\n\n    id: number;\n    name: string;\n    muted: boolean;\n    cameraOff: boolean;\n    screenSharing: boolean;\n    listener: boolean;\n    videoElement: HTMLElement;\n    connection: RTCPeerConnection;\n    dataChannel: any;\n    devices: Devices;\n    textchat: Textchat;\n    exchange: IExchange\n    videogrid: Videogrid\n    connected: boolean = false;\n    offerLoop: any;\n    messages: Array<any> = Array<any>();\n    onConnectedEvent: (partner: IPartner) => void;\n    onConnectionClosedEvent: (partner: IPartner) => void;\n    onConnectionLosedEvent: (partner: IPartner) => void;\n    \n    doReload: boolean = false;\n    closed: boolean = false;\n    gotTracks: boolean = false;\n    \n    videoGridElement: Video;\n    partnerListElement: PartnerListElement;\n    stream: any;\n\n    constructor(\n        id: number, \n        exchange: IExchange, \n        devices: Devices, \n        textchat: Textchat, \n        videogrid: Videogrid, \n        onConnectedEvent: (partner: IPartner) => void,\n        onConnectionClosedEvent: (partner: IPartner) => void,\n        onConnectionLosedEvent: (partner: IPartner) => void){\n            this.id = id;\n            this.exchange = exchange;\n            this.devices = devices;\n            this.textchat = textchat;\n            this.videogrid = videogrid;\n            this.onConnectedEvent = onConnectedEvent;\n            this.onConnectionClosedEvent = onConnectionClosedEvent;\n            this.onConnectionLosedEvent = onConnectionLosedEvent;\n\n            var cla = this;\n            cla.addVideoElement();\n            cla.videogrid.recalculateLayout();\n\n            var communication = new WebRTC(this);\n            communication.addOnaddtrackEvent(this.onAddTrack);\n            communication.addOnicecandidateEvent(this.onIceCandidate); \n            communication.addConnectionLosedEvent(this.onConnectionLosed);\n            communication.addConnectionEvent(this.onConnected);\n            communication.addOnMessageEvent(this.onMessage);\n            this.connection = communication.getPeerConnection();\n            this.dataChannel = communication.getDataChannel(this.connection);\n            this.setSendMessageInterval();\n    }\n\n    getName(): string{\n        return this.name ?? \"Gast\" + this.id.toString();\n    }\n\n    setName(name: string){\n        this.name = name;\n        this.videoGridElement.videoVueObject.name = name;\n        this.partnerListElement.partnerListElementVueObject.name = name;\n    }\n\n    setMuted(muted: boolean){\n        this.muted = muted;\n        this.videoGridElement.videoVueObject.muted = muted;\n        this.partnerListElement.partnerListElementVueObject.muted = muted;\n    }\n\n    setCameraOff(cameraOff: boolean){\n        this.cameraOff = cameraOff;\n        this.videoGridElement.videoVueObject.cameraOff = cameraOff;\n        this.partnerListElement.partnerListElementVueObject.cameraOff = cameraOff;\n    }\n\n    setScreenSharing(screenSharing: boolean){\n        this.screenSharing = screenSharing;\n        this.videoGridElement.videoVueObject.screenSharing = screenSharing;\n        this.partnerListElement.partnerListElementVueObject.screenSharing = screenSharing;\n    }\n\n    setListener(listener: boolean){\n        this.listener = listener;\n        this.videoGridElement.videoVueObject.listener = listener;\n        this.partnerListElement.partnerListElementVueObject.listener = listener;\n    }\n\n    createOffer(doLoop: boolean = false): void {\n        if(!this.offerLoop){\n            this.createOfferInner();\n            var loop = 12;\n            var cla = this;\n            if(doLoop){\n                this.offerLoop = setInterval(function(){\n                    if(!cla.connected){\n                        if(loop == 0){\n                            clearInterval(cla.offerLoop);\n                            cla.offerLoop = null;\n                            cla.closeConnection();\n                        }else{\n                            cla.createOfferInner();\n                            loop--;\n                        }\n                    }else{\n                        clearInterval(cla.offerLoop);\n                        cla.offerLoop = null;\n                    }\n                }, 10000);\n            }\n        }\n    }\n\n    createOfferInner(): void{\n        if((!this.connected && !this.closed) || this.doReload){\n            console.log(\"Create Offer to: \" + this.id);\n            let cla = this;\n            this.connection.createOffer({iceRestart: true, offerToReceiveAudio: true, offerToReceiveVideo: true})\n            .then(function(offer){\n                return cla.connection.setLocalDescription(offer);\n            })\n            .then(function(){\n                cla.exchange.sendMessage({'sdp': cla.connection.localDescription}, cla.id);\n            });\n        }\n    }\n\n    createAnswer(offer: any): void{\n        console.log(\"Create Answer to: \" + this.id);\n        var cla = this;\n        this.connection.setRemoteDescription(new RTCSessionDescription(offer)) \n        .then(function(){ \n            return cla.connection.createAnswer();\n        })\n        .then(function(answer){\n            return cla.connection.setLocalDescription(answer);\n        })\n        .then(function(){\n            cla.exchange.sendMessage({'sdp': cla.connection.localDescription}, cla.id);\n        });\n    }\n\n    onIceCandidate(candidate: any, partner: IPartner) {\n        partner.exchange.sendMessage({'ice': candidate}, partner.id);\n    };\n    \n    onAddTrack(stream: any, partner: IPartner) { \n        partner.addVideoElement();\n        // @ts-ignore\n        partner.videoElement.srcObject = stream;\n        partner.gotTracks = true;\n    };\n\n    onConnected(partner: IPartner){\n        partner.connected = true;\n        if(this.doReload){\n            this.reloadConnection();\n        }\n        if(partner.offerLoop){\n            clearInterval(partner.offerLoop);\n            partner.offerLoop = null;\n        }\n\n        $('#video-item-'+partner.id).removeClass(\"unconnected\");\n        partner.onConnectedEvent(partner);\n        partner.partnerListElement.partnerListElementVueObject.connected = true;\n        partner.videogrid.recalculateLayout();\n\n        setTimeout(function(){\n            if(!partner.gotTracks && !partner.listener){\n                partner.reloadConnection();\n            }\n        }, 2000);\n\n\n        //start playing video with sound\n        var videoplayInterval = setInterval(function(){\n            // @ts-ignore\n            if(partner.videoElement.paused){\n                // @ts-ignore\n                partner.videoElement.play();\n            }else{\n                clearInterval(videoplayInterval);\n            }\n        }, 100);\n        \n    }\n\n    onConnectionLosed(partner: IPartner){\n        console.log(\"Connection losed to: \" + partner.id);\n        partner.connected = false;\n        partner.createOffer(true); \n        $('#video-item-'+partner.id).addClass(\"unconnected\");\n        partner.onConnectionLosedEvent(partner);\n        partner.partnerListElement.partnerListElementVueObject.connected = false;\n        partner.videogrid.recalculateLayout();\n    }\n\n    reloadConnection(){\n        if(this.connected){\n            this.doReload = true;\n            this.createOffer();\n            this.doReload = false;\n        } else {\n            this.doReload = true;\n        }\n    }\n\n    closeConnection(){\n        this.closed = true;\n        this.connection.close();\n        console.log(\"Connection closed to: \"+this.id);\n        this.videoElement = null;\n        $('#video-item-'+this.id).remove();\n        this.onConnectionLosedEvent(this);\n        this.partnerListElement.partnerListElementVueObject.connected = false;\n        this.videogrid.recalculateLayout();\n    }\n\n    setSinkId(sinkId: any): void{\n        if(this.videoElement != undefined){\n            // @ts-ignore\n            this.videoElement.setSinkId(sinkId);\n        }\n    }\n\n    sendMessage(message: any): void{\n        this.messages.push(message);\n    }\n\n    setSendMessageInterval(){\n        var cla = this;\n        setInterval(function(){\n            if(cla.dataChannel.readyState === \"open\"){\n                for (var message of cla.messages) {\n                    cla.dataChannel.send(JSON.stringify(message));\n                }\n                cla.messages = Array<any>();\n            }\n        }, 100); \n    }\n\n    onMessage(message: any, partner: IPartner){\n        console.log(\"Communication message from \" + partner.id)\n        console.log(message);\n        if(message.type !== undefined && message.message !== undefined){\n            if(message.type === partner.textchat.textchatMessageType){\n                partner.textchat.addNewPartnerMessageToChat(message.message, partner);\n            } else if(message.type === Userinfo.userinfoMessageType && message.message.name != undefined){\n                partner.setName(message.message.name);\n                partner.setMuted(message.message.muted);\n                partner.setCameraOff(message.message.cameraOff);\n                partner.setScreenSharing(message.message.screenSharing);\n                partner.setListener(message.message.listener);\n            }\n        }\n    }\n\n    addVideoElement(){\n        var cla = this;\n        if(this.videoElement == undefined){\n            $(\"#video-area\").append('<div class=\"video-item video-item-partner\" id=\"video-item-'+this.id+'\"><div class=\"video-wrap\"><div class=\"video-inner-wrap\"><video id=\"video-'+this.id+'\" autoplay playsinline></video></div></div></div>');\n            this.videoElement = document.getElementById('video-'+this.id);\n            this.videoGridElement = new Video(document.getElementById('video-item-'+this.id), this);\n            this.partnerListElement = new PartnerListElement(this);\n            this.videogrid.recalculateLayout();\n        }\n        setTimeout(function(){\n            cla.setSinkId(cla.devices.devicesVueObject.sound);\n        }, 1);\n    }\n\n}","\nimport { ICommunication } from \"./ICommunication.js\";\nimport { IPartner } from \"../Partner/IPartner.js\";\n\nexport class WebRTC implements ICommunication{\n    \n    servers = {'iceServers': [{'urls': 'stun:stun.services.mozilla.com'}, {'urls': 'stun:stun.l.google.com:19302'}]};\n    partner: IPartner;\n    onicecandidateEvent: (candidate: any, partner: IPartner) => void;\n    onaddtrackEvent: (stream: any, partner: IPartner) => void;\n    connectionLosedEvent: (partner: IPartner) => void;\n    connectionEvent: (partner: IPartner) => void;\n    onMessageEvent: (message: any, partner: IPartner) => void;\n\n    constructor(partner: IPartner){\n        this.partner = partner;\n    }\n\n    getPeerConnection(): RTCPeerConnection{\n        var pc = new RTCPeerConnection(this.servers);\n        this.setPCEvents(pc);\n        return pc;\n    }\n\n    setPCEvents(pc: RTCPeerConnection){\n        let cla = this;\n        pc.onicecandidate = function(event) {\n            if(event.candidate){\n                cla.onicecandidateEvent(event.candidate, cla.partner);\n            }else{\n                console.log(\"Sent All Ice to \" + cla.partner.id);\n            }\n        };\n        // @ts-ignore\n        pc.ontrack = function(event) { \n            return cla.onaddtrackEvent(event.streams[0], cla.partner);\n        };\n        pc.oniceconnectionstatechange = function() {\n            if(pc.iceConnectionState == 'disconnected') {\n                cla.connectionLosedEvent(cla.partner);\n            } else if (pc.iceConnectionState == 'connected'){\n                cla.connectionEvent(cla.partner);\n            }\n        }\n    }\n\n    getDataChannel(pc: RTCPeerConnection){\n        let cla = this;\n         var dataChannel = pc.createDataChannel(\"chat\", {negotiated: true, id: 0});\n          \n         dataChannel.onerror = function (error) { \n            console.log(error);\n         };\n          \n         dataChannel.onmessage = function (event) { \n            cla.onMessageEvent(JSON.parse(event.data), cla.partner);\n         };  \n\n         dataChannel.onclose = function(event) {\n            console.log(\"Data Channel is diconnected!\"); \n            //cla.connectionLosedEvent(cla.partner); \n          }\n\n         return dataChannel;\n    }\n    \n\n    addOnicecandidateEvent(callback: (candidate: any, partner: IPartner) => void): void{\n        this.onicecandidateEvent = callback;\n    }\n\n    addOnaddtrackEvent(callback: (stream: any, partner: IPartner) => void): void{\n        this.onaddtrackEvent = callback;\n    }\n\n    addConnectionLosedEvent(callback: (partner: IPartner) => void): void{\n        this.connectionLosedEvent = callback;\n    }\n\n    addConnectionEvent(callback: (partner: IPartner) => void): void{\n        this.connectionEvent = callback;\n    }\n\n    addOnMessageEvent(callback: (message: any, partner: IPartner) => void): void{\n        this.onMessageEvent = callback;\n    }\n}","import { App } from \"../app\";\nimport { Cookie } from \"../Utils/Cookie\";\n\ndeclare var Vue: any;\n\nexport class Userinfo{\n\n    static readonly userinfoMessageType: string = 'userinfo';\n    \n    readonly nameCookie: string = 'name';\n    \n    app: App;\n    userinfoVueObject: any; \n\n\n    constructor(app: App){\n        this.app = app;\n        this.app.yourName = Cookie.getCookie(this.nameCookie) ?? null;\n        this.initialElements();\n    }\n\n    initialElements(){\n        let cla = this;\n        this.userinfoVueObject = new Vue({\n            el: '#userinfo',\n            data: {\n                name: Cookie.getCookie(cla.nameCookie) ?? null\n            },\n            methods: {\n                changeUserinfo: function(){\n                    cla.app.sendMessageToAllPartners(cla.getUserInfo()); \n                    Cookie.setCookie(cla.nameCookie, this.name);\n                    cla.app.yourName = this.name;\n                }\n            }\n        });\n    }\n\n    getUserInfo(){\n        return {\n            type: Userinfo.userinfoMessageType, message: \n                {\n                    name: this.userinfoVueObject.name, \n                    muted: !this.app.controls.controlsVueObject.microphoneOn,\n                    cameraOff: !this.app.controls.controlsVueObject.cameraOn,\n                    screenSharing: this.app.screen.onScreenMode(),\n                    listener: this.app.listener\n                }\n            };\n    }\n}","\nexport class Cookie{\n    /*\n    * General utils for managing cookies in Typescript.\n    */\n   static setCookie(name: string, val: string) {\n        const date = new Date();\n        const value = val;\n\n        // Set it expire in 1 year\n        date.setTime(date.getTime() + (365 * 24 * 60 * 60 * 1000));\n\n        // Set it\n        document.cookie = name+\"=\"+value+\"; expires=\"+date.toUTCString()+\"; path=/\";\n    }\n\n    static getCookie(name: string) {\n        const value = \"; \" + document.cookie;\n        const parts = value.split(\"; \" + name + \"=\");\n        \n        if (parts.length == 2) {\n            return parts.pop().split(\";\").shift();\n        }\n    }\n\n    static deleteCookie(name: string) {\n        const date = new Date();\n\n        // Set it expire in -1 days\n        date.setTime(date.getTime() + (-1 * 24 * 60 * 60 * 1000));\n\n        // Set it\n        document.cookie = name+\"=; expires=\"+date.toUTCString()+\"; path=/\";\n    }\n}","import { IPartner } from \"../Partner/IPartner\";\n\ndeclare var Vue: any;\n\nexport class Video{\n\n    element: HTMLElement;\n    partner: IPartner;\n\n    videoVueObject: any;\n\n    constructor(element: HTMLElement, partner: IPartner){\n        this.element = element;\n        this.partner = partner;\n        this.addCodeToVideoElement();\n        this.setVueElement();\n    }\n\n    addCodeToVideoElement(){\n        $(this.element).find(\".video-wrap\").append(`\n            <div class=\"video-info-wrap\" v-on:dblclick=\"expand\" v-bind:class=\"{'cammeraoff': cameraOff  && !screenSharing}\">\n                <div class=\"video-name\">{{name}} \n                <span v-bind:class=\"{'on': !listener}\" class=\"listener fas fa-eye\"></span>\n                <span v-bind:class=\"{'on': !muted || listener}\" class=\"microphone fas fa-microphone-slash\"></span> \n                <span v-bind:class=\"{'on': !cameraOff || listener}\" class=\"camera fas fa-video-slash\"></span>\n                <span v-bind:class=\"{'on': !screenSharing}\" class=\"screen fas fa-desktop\"></span>\n                </div>\n                <div v-on:click=\"expand\" v-bind:class=\"{'fa-compress-arrows-alt': expanded, 'fa-expand-arrows-alt': !expanded}\" class=\"expand fas\"></div>\n            </div>\n        `);\n    }\n\n    setVueElement(){\n        let cla = this;\n        this.videoVueObject = new Vue({\n            el: $(this.element).find(\".video-info-wrap\").get(0),\n            data: {\n                name: cla.partner ? cla.partner.getName() : \"Du\",\n                expanded: false,\n                muted: false,\n                cameraOff: false,\n                screenSharing: false,\n                listener: false\n            },\n            methods: {\n                expand: function(){\n                    $(cla.element).toggleClass(\"big\");\n                    this.expanded = !this.expanded;\n                }\n            }\n        });\n    }\n}","import { App } from \"../app\";\nimport { IPartner } from \"../Partner/IPartner\";\nimport { IPartners } from \"../Partner/IPartners\";\n\ndeclare var Vue: any;\n\nexport class PartnerListElement{\n\n    app: App;\n    partner: IPartner;\n    partnerListElementVueObject: any; \n\n    constructor(partner: IPartner){\n        this.partner = partner;\n        this.addCodeToVideoElement();\n        this.setVueElement();\n    }\n\n    addCodeToVideoElement(){\n        $(\"#partnerlist ul\").append(`\n            <li id=\"partnerlistelement-${this.partner ? this.partner.id : 0}\" v-bind:class=\"{'unconnected': !connected}\">\n                {{ name }} \n                <span v-bind:class=\"{'on': !listener}\" class=\"listener fas fa-eye\"></span>\n                <span v-bind:class=\"{'on': !muted || listener}\" class=\"microphone fas fa-microphone-slash\"></span> \n                <span v-bind:class=\"{'on': !cameraOff || listener}\" class=\"camera fas fa-video-slash\"></span>\n                <span v-bind:class=\"{'on': !screenSharing}\" class=\"screen fas fa-desktop\"></span>\n            </li>\n        `);\n    }\n\n    setVueElement(){\n        let cla = this;\n        this.partnerListElementVueObject = new Vue({\n            el: \"#partnerlistelement-\" + (cla.partner ? cla.partner.id : 0),\n            data: {\n                name: cla.partner ? cla.partner.getName() : \"Du\",\n                muted: false,\n                connected: true,\n                cameraOff: false,\n                screenSharing: false,\n                listener: false\n            },\n            methods: { \n            }\n        });\n    }\n\n}","import { App } from \"../app\";\nimport { Cookie } from \"../Utils/Cookie\";\n\ndeclare var Vue: any;\n\nexport class Controls{\n\n    app: App;\n    controlsVueObject: any; \n\n    readonly microphoneCookie: string = 'microphoneOn';\n    readonly cameraCookie: string = 'cameraOn';\n\n    constructor(app: App){\n        this.app = app;\n        this.initialElements();\n        this.setSidebarClickRemove();\n    }\n\n    initialElements(){\n        let cla = this;\n        this.controlsVueObject = new Vue({\n            el: '#controls',\n            data: {\n                microphoneOn: Cookie.getCookie(cla.microphoneCookie) == 'false' ? false : true,\n                cameraOn: Cookie.getCookie(cla.cameraCookie) == 'false' ? false : true,\n                hangouted: false,\n                screenOn: false,\n                optionOn: false \n            },\n            methods: {\n                toogleMicrophone: function () {\n                    this.microphoneOn = !this.microphoneOn;\n                    Cookie.setCookie(cla.microphoneCookie, this.microphoneOn);\n                    cla.toogleStreamMicrophone(false);\n                    cla.app.sendMessageToAllPartners(cla.app.userinfo.getUserInfo());\n                },\n                toogleCamera: function () {\n                    this.cameraOn = !this.cameraOn;\n                    Cookie.setCookie(cla.cameraCookie, this.cameraOn);\n                    cla.toogleStreamCamera();\n                    cla.app.sendMessageToAllPartners(cla.app.userinfo.getUserInfo());\n                },hangOut: function () {\n                    if(!this.hangouted){\n                        cla.hangOut();\n                        this.hangouted = true;\n                    } else{\n                        location.hash = cla.app.room;\n                        location.reload();\n                    }                    \n                }, toogleScreen: function(){\n                    if(cla.app.screen.onScreenMode()){\n                        cla.app.screen.stopScreen();\n                    }else{\n                        cla.app.screen.startScreen();\n                    }\n                }, toogleOption: function(){\n                    this.optionOn = !this.optionOn;\n                    cla.toogleOption(); \n                }\n            }\n        });\n\n        this.setMutedIcon();\n        this.setCameraOffIcon();\n\n\n        //tabs\n        $('#sidebar .tabs .tabs-header > *:first').addClass('active');\n        $('#sidebar .tabs .tabs-content > *:first').addClass('active');\n            \n        $('#sidebar .tabs .tabs-header > *').on('click', function(){\n            var t = $(this).attr('tab');\n            cla.activateSidebarTab(t);\n        });\n\n    }\n\n    activateSidebarTab(type: string){\n        $('#sidebar .tabs .tabs-header > *').removeClass('active');           \n        $('#sidebar .tabs .tabs-header > [tab=' + type + '] ').addClass('active');\n\n        $('#sidebar .tabs .tabs-content > *').removeClass('active');  \n        $('#sidebar .tabs .tabs-content > #tab-'+ type ).addClass('active');\n    }\n\n    initialiseStream(){\n        this.toogleStreamMicrophone(false);\n        this.toogleStreamCamera(false); \n    }\n\n    toogleStreamMicrophone(changeCamera: boolean = true)\n    {\n        if(this.app.localStream !== undefined){\n            this.app.localStream.getAudioTracks()[0].enabled = this.controlsVueObject.microphoneOn;\n            if(changeCamera && this.controlsVueObject.microphoneOn){\n                this.app.initialCamera();  \n            }\n        }\n        this.setMutedIcon();\n    }\n\n    toogleStreamCamera(changeCamera: boolean = true)\n    {\n        if(this.app.localStream !== undefined){\n            this.app.localStream.getVideoTracks()[0].enabled = this.controlsVueObject.cameraOn;\n            if(changeCamera && this.controlsVueObject.cameraOn){\n                this.app.initialCamera();\n            }\n        }\n        this.setCameraOffIcon();\n    }\n\n    setMutedIcon(){\n        this.app.yourVideoElement.videoVueObject.muted = !this.controlsVueObject.microphoneOn;\n        this.app.partnerListElement.partnerListElementVueObject.muted = !this.controlsVueObject.microphoneOn;\n    }\n\n    setCameraOffIcon(){\n        this.app.yourVideoElement.videoVueObject.cameraOff = !this.controlsVueObject.cameraOn;\n        this.app.partnerListElement.partnerListElementVueObject.cameraOff = !this.controlsVueObject.cameraOn;\n    }\n\n    toogleOption(){\n        this.app.sidebarToogle(this.controlsVueObject.optionOn);\n    }\n\n    setSidebarClickRemove(){\n        var cla = this;\n        $(\"#clickbackground\").on(\"click\", function(){\n            if(cla.controlsVueObject.optionOn){\n                cla.controlsVueObject.toogleOption();\n            }\n        });\n    }\n\n    hangOut(){\n        this.app.hangOut();\n    }\n}","import { App } from \"../app\";\n\nexport class Screen{\n\n    app: App;\n    screenOn: boolean = false;\n\n    constructor(app: App){\n        this.app = app;\n    }\n\n    startScreen(){\n        this.initialScreen();\n    }\n\n    stopScreen(closed: boolean = false){\n        this.screenOn = false;\n        if(this.onScreenMode && !closed){\n            this.app.localScreenStream.getTracks().forEach(track => track.stop());\n        }\n        this.app.controls.controlsVueObject.screenOn = false;\n        // @ts-ignore\n        this.app.yourVideo.srcObject = this.app.localStream;\n        this.app.setStreamToPartners();\n        this.app.yourVideoElement.videoVueObject.screenSharing = false;\n        this.app.partnerListElement.partnerListElementVueObject.screenSharing = false;\n        this.app.sendMessageToAllPartners(this.app.userinfo.getUserInfo());\n    }\n\n    initialScreen() {\n        var cal = this;\n        if(!this.app.localScreenStream || !this.app.localScreenStream.active){\n            // @ts-ignore\n            navigator.mediaDevices.getDisplayMedia()\n            .then(function(stream){\n                cal.screenOn = true;\n                // @ts-ignore\n                cal.app.yourVideo.srcObject = stream;\n                cal.app.localScreenStream = stream;\n                cal.app.controls.controlsVueObject.screenOn = true;\n                cal.app.setStreamToPartners();\n                if(!cal.app.localStream){\n                    cal.app.reloadConnections();  \n                }\n                cal.app.localScreenStream.getTracks()[0].onended = function () {\n                    cal.stopScreen(true);\n                };\n                cal.app.yourVideoElement.videoVueObject.screenSharing = true;\n                cal.app.partnerListElement.partnerListElementVueObject.screenSharing = true;\n                cal.app.sendMessageToAllPartners(cal.app.userinfo.getUserInfo());\n            });\n        }else{\n            // @ts-ignore\n            this.app.yourVideo.srcObject = this.app.localScreenStream;\n        }\n    }\n\n    onScreenMode(): boolean{\n        if(this.app.localScreenStream && this.app.localScreenStream.active && this.screenOn){\n            return true;\n        }\n        return false;\n    }\n}","import { App } from \"../app\";\nimport { Cookie } from \"../Utils/Cookie\";\n\ndeclare var Vue: any;\n\nexport class Devices{\n\n    readonly audioCookie: string = 'audio';\n    readonly videoCookie: string = 'video';\n    readonly soundCookie: string = 'sound';\n\n    app: App;\n\n    audioDevices: IDeviceList = {};\n    videoDevices: IDeviceList = {};\n    soundDevices: IDeviceList = {};\n\n    devicesVueObject: any; \n\n    constructor(app: App){\n        this.app = app;\n        this.setDeviceElements();\n    }\n\n    gotDevices(deviceInfos: any) {\n        for (let i = 0; i !== deviceInfos.length; ++i) {\n          const deviceInfo = deviceInfos[i];\n          var value = deviceInfo.deviceId;\n          if (deviceInfo.kind === 'audioinput') {\n            var text = deviceInfo.label || `microphone`;\n            this.audioDevices[value] = text;\n          } else if (deviceInfo.kind === 'audiooutput') {\n            var text = deviceInfo.label || `speaker`;\n            this.soundDevices[value] = text;\n          } else if (deviceInfo.kind === 'videoinput') {\n            var text = deviceInfo.label || `camera`;\n            this.videoDevices[value] = text;\n          } else {\n            console.log('Some other kind of source/device: ', deviceInfo);\n          }\n        }\n        this.setDeviceElements();\n        this.app.initialCamera(true);\n    }\n\n    setDeviceElements(){\n        var cla = this;\n        if(!this.devicesVueObject){\n            this.devicesVueObject = new Vue({\n                el: '#devices',\n                data: {\n                    audio: null,\n                    audiooptions: {},\n                    video: null,\n                    videooptions: {},\n                    sound: null,\n                    soundoptions: {}\n                },\n                methods: {\n                    onChange() {\n                        Cookie.setCookie(cla.audioCookie, this.audio);\n                        Cookie.setCookie(cla.videoCookie, this.video);\n                        Cookie.setCookie(cla.soundCookie, this.sound);\n                        cla.app.initialCamera();\n                        cla.attachSinkId();\n                    }\n                }\n            })\n        }\n        this.devicesVueObject.audio = this.getDefaultDevice(cla.audioDevices, this.audioCookie);\n        this.devicesVueObject.audiooptions = cla.audioDevices;\n        this.devicesVueObject.video = this.getDefaultDevice(cla.videoDevices, this.videoCookie);\n        this.devicesVueObject.videooptions = cla.videoDevices;\n        this.devicesVueObject.sound = this.getDefaultDevice(cla.soundDevices, this.soundCookie);\n        this.devicesVueObject.soundoptions = cla.soundDevices;\n    }\n\n    getDefaultDevice(list: any, cookieKey: string){\n        var value = Cookie.getCookie(cookieKey);\n        if(value in list){\n            return value;\n        }\n        if(Object.keys(list).length !== 0){\n            return Object.keys(list)[0];\n        }\n        return null;\n    }\n\n    attachSinkId() {\n        // @ts-ignore\n        if (typeof this.app.yourVideo.sinkId !== 'undefined') {\n            for (var id in this.app.partners) {\n                this.app.partners[id].setSinkId(this.devicesVueObject.sound);\n            }\n        } else {\n          console.warn('Browser does not support output device selection.');\n        }\n    }\n}\n\nexport interface IDeviceList{\n    [key: number]: string;\n}","import { App } from \"../app\";\nimport { IPartner } from \"../Partner/IPartner\";\nimport { IDatabase } from \"../Database/IDatabase\";\nimport { IDatabaseStructure } from \"../Database/IDatabase\";\nimport { IDatabaseObject } from \"../Database/IDatabase\";\nimport { IDatabaseObjectElement } from \"../Database/IDatabase\";\nimport { IDatabaseObjectElementList } from \"../Database/IDatabase\";\nimport { IDatabaseQuery } from \"../Database/IDatabase\";\nimport { IndexedDB } from \"../Database/IndexedDB\";\n\ndeclare var Vue: any;\n\nexport class Textchat{\n\n    readonly dbVersion: number = 1;\n\n    readonly textchatMessageType: string = 'textchat';\n    readonly textchatDatabaseName: string = 'chat';\n    readonly textchatDatabaseObjectName: string = 'textchat';\n    \n    readonly textchatMessageTypeText: string = 'text';\n    readonly textchatMessageTypeImage: string = 'image';\n\n    readonly textchatMaxImageSize: number = 800;\n    \n    app: App;\n    textchatVueObject: any; \n    database: IDatabase;\n    databaseStructure: IDatabaseStructure;\n\n\n    constructor(app: App){\n        this.app = app;\n        this.initialElements();\n        this.initialDatabase();\n        var cla = this;\n    }\n\n    initialElements(){ \n        let cla = this;\n        this.textchatVueObject = new Vue({\n            el: '#textchat',\n            data: {\n                message: \"\",\n                result: \"\",\n                extrainfo: \"\",\n                extrainfoVisible: false,\n                image: null\n            },\n            methods: {\n                sendMessage: function(){\n                    if(this.image){\n                        var message = {\n                            image: {\n                                image: this.image,\n                                text: this.message\n                            }\n                        }\n                        var data = {type: cla.textchatMessageType, message: message};\n                        if(cla.checkSize(data)){\n                            cla.app.sendMessageToAllPartners(data); \n                            cla.addMessage(\"Du\", message.image, new Date(), true, cla.textchatMessageTypeImage);\n                        } else {\n                            alert(\"Datei ist zu groß für den Versand, die Datei darf nur 256kb groß sein!\");\n                            return;\n                        }\n                    } else if(this.message){\n                        cla.app.sendMessageToAllPartners({type: cla.textchatMessageType, message: {text: this.message}}); \n                        cla.addMessage(\"Du\", this.message, new Date(), true);\n                    }\n                    this.image = null;\n                    this.extrainfoVisible = false;\n                    this.message = \"\";\n                },\n                addfile: function(e){\n                    var vue = this;\n                    var fileList = e.target.files;\n                    if (!fileList.length) return;\n                    let reader = new FileReader();\n                    if(fileList[0] && fileList[0].type.match(/image.*/)) {\n                        reader.onload = (readerEvent) => {\n                            /*vue.image = reader.result.toString();\n                            cla.setImageToExtra(vue.image);*/\n                            var image = new Image();\n                            image.onload = function (imageEvent) {\n                                var canvas = document.createElement('canvas'),\n                                    max_size = cla.textchatMaxImageSize,\n                                    width = image.width,\n                                    height = image.height;\n                                if (width > height) {\n                                    if (width > max_size) {\n                                        height *= max_size / width;\n                                        width = max_size;\n                                    }\n                                } else {\n                                    if (height > max_size) {\n                                        width *= max_size / height;\n                                        height = max_size;\n                                    }\n                                }\n                                canvas.width = width;\n                                canvas.height = height;\n                                canvas.getContext('2d').drawImage(image, 0, 0, width, height);\n                                var dataUrl = canvas.toDataURL('image/jpeg');\n                                cla.setImageToExtra(dataUrl);\n                                vue.image = dataUrl;\n                            }\n                            image.src = readerEvent.target.result.toString();\n                        }\n                        reader.readAsDataURL(fileList[0]);\n                    }\n                    e.target.value = \"\";\n                },\n                closeExtra: function(){\n                    this.image = null;\n                    this.extrainfoVisible = false;\n                }\n            }\n        });\n    }\n\n    initialDatabase(){\n        this.database = new IndexedDB();\n        this.databaseStructure = {\n            [this.textchatDatabaseObjectName]: {\n                name: this.textchatDatabaseObjectName,\n                keyPath: 'id',\n                autoIncrement: true,\n                elements: {\n                    room: {\n                        name: 'room',\n                        unique: false\n                    },\n                    partnerName: {\n                        name: 'partnerName',\n                        unique: false\n                    },\n                    date: {\n                        name: 'date',\n                        unique: false\n                    },\n                    self: {\n                        name: 'self',\n                        unique: false\n                    },\n                    message: {\n                        name: 'message',\n                        unique: false\n                    },\n                    type: {\n                        name: 'type',\n                        unique: false\n                    }\n                }\n            }\n        };\n        this.database.initDatabase(this.textchatDatabaseName, this.dbVersion, this.databaseStructure, function(success: boolean, caller: Textchat){\n            if(success){\n                caller.loadMessagesFromDB();\n            } else {\n                console.log(\"Cannot create DB!\");\n            }\n        }, this);\n    }\n\n    loadMessagesFromDB(){\n        var query: IDatabaseQuery = {\n            element: {\n                name: 'room',\n                unique: false\n            },\n            value: this.app.room\n        };\n        this.database.read(this.databaseStructure[this.textchatDatabaseObjectName], query, function(success: boolean, data: any, caller: Textchat){\n            if(success){\n                for(var i = 0; i < data.length; i++){\n                    caller.addMessageToChat(data[i].partnerName, data[i].message, data[i].date, data[i].self, data[i].type);\n                }\n            }else{\n                console.log(\"Cannot read message to DB!\"); \n            }\n        }, this);\n    }\n\n    addNewPartnerMessageToChat(message: any, partner: IPartner){\n        if(message.text !== undefined){\n            this.addMessage(partner.getName(), message.text);\n        } else if(message.image !== undefined){\n            this.addMessage(partner.getName(), message.image, new Date(), false, this.textchatMessageTypeImage);\n        }\n    }\n\n    addMessage(sender: string, message: any, datetime: Date = new Date(), self: boolean = false, type: string = this.textchatMessageTypeText){\n        this.addMessageToChat(sender, message, datetime, self, type);\n        var data = {\n            room: this.app.room,\n            partnerName: sender,\n            date: datetime,\n            self: self,\n            message: message,\n            type: type\n        };\n        this.database.add(this.databaseStructure[this.textchatDatabaseObjectName], data, function(success: boolean, caller: Textchat){\n            if(!success){\n                console.log(\"Cannot add message to DB!\");\n            }\n        }, this);\n    }\n\n    addMessageToChat(sender: string, message: any, datetime: Date = new Date(), self: boolean = false, type: string = this.textchatMessageTypeText){\n        if(type === this.textchatMessageTypeText){\n            this.addTextToChat(sender, message, datetime, self);\n        } else if(type === this.textchatMessageTypeImage){\n            this.addImageToChat(sender, message, datetime, self);\n        }\n    }\n\n    addTextToChat(sender: string, message: string, datetime: Date = new Date(), self: boolean = false){\n        var side = self ? \"right\" : \"left\";\n        const msgHTML = `\n            <div class=\"msg ${side}-msg\">\n            <div class=\"msg-bubble\">\n                <div class=\"msg-info\">\n                    <div class=\"msg-info-name\">${sender}</div>\n                    <div class=\"msg-info-time\">${this.formatDate(datetime)}</div>\n                </div>\n\n                <div class=\"msg-text\">${this.formatMessage(message)}</div>\n            </div>\n            </div>\n        `;\n        $(\"#textchat .msger-chat\").append(msgHTML);\n        this.scrollToBottom();\n    }\n\n    addImageToChat(sender: string, message: any, datetime: Date = new Date(), self: boolean = false){\n        var cla = this;\n        var side = self ? \"right\" : \"left\";\n        const msgHTML = `\n            <div class=\"msg ${side}-msg\">\n            <div class=\"msg-bubble\">\n                <div class=\"msg-info\">\n                    <div class=\"msg-info-name\">${sender}</div>\n                    <div class=\"msg-info-time\">${this.formatDate(datetime)}</div>\n                </div>\n                <div class=\"msg-image\"><img src=\"${message.image}\"/></div>\n                <div class=\"msg-text\">${this.formatMessage(message.text)}</div>\n            </div>\n            </div>\n        `;\n        $(\"#textchat .msger-chat\").append(msgHTML);\n        setTimeout(function(){\n            cla.scrollToBottom();\n        }, 100);\n        $(\"#textchat img\").off();\n        $(\"#textchat img\").on(\"click\", function(){\n            cla.app.lightbox.addImage($(this).attr(\"src\"));\n        });\n    }\n\n    setImageToExtra(image: string){\n        this.textchatVueObject.extrainfo = '<img src=\"'+image+'\"/>';\n        this.textchatVueObject.extrainfoVisible = true;\n    }\n\n    scrollToBottom(){\n        $(\"#textchat .msger-chat\").scrollTop($(\"#textchat .msger-chat\").get(0).scrollHeight); \n    }\n\n    formatMessage(message: any){\n        var urlRegex = /(https?:\\/\\/[^\\s]+)/g;\n        message = message.replace(urlRegex, function(url) {\n          return '<a target=\"_blank\" href=\"' + url + '\">' + url + '</a>';\n        })\n        message = message.replaceAll(\"\\n\", \"<br>\");\n        return message;\n    }\n\n    formatDate(date) {\n        const h = \"0\" + date.getHours();\n        const m = \"0\" + date.getMinutes();\n\n        const d = \"0\" + date.getDate();\n        const mo = \"0\" + (date.getMonth()+1);\n        const y = date.getFullYear();\n\n        const currentDate = new Date();\n\n        if(date.getDate() == currentDate.getDate() && date.getMonth() == currentDate.getMonth() && date.getFullYear() == currentDate.getFullYear()){\n            return `${h.slice(-2)}:${m.slice(-2)}`;\n        }      \n        return `${d.slice(-2)}.${mo.slice(-2)}.${y} ${h.slice(-2)}:${m.slice(-2)}`;\n    }\n\n    checkSize(data: any): boolean{\n        var dataJson = JSON.stringify(data);\n        var size = new Blob([dataJson]).size;\n        console.log(\"File size: \" + size + \"kb\");\n        return size < 262000;\n    }\n\n}\n","import { IDatabase } from \"./IDatabase.js\";\nimport { IDatabaseStructure } from \"./IDatabase.js\";\nimport { IDatabaseObject } from \"./IDatabase.js\";\nimport { IDatabaseObjectElement } from \"./IDatabase.js\";\nimport { IDatabaseObjectElementList } from \"./IDatabase.js\";\nimport { IDatabaseQuery } from \"./IDatabase.js\";\n\nexport class IndexedDB implements IDatabase{\n\n    db: any;\n    request: any;\n\n    constructor(){\n        if (!window.indexedDB) {\n            window.alert(\"Your browser doesn't support a stable version of IndexedDB.\")\n        }\n    }\n\n    initDatabase(database: string, version: number = 1, structur: IDatabaseStructure, callback: (success: boolean, caller: any) => void, caller: any){\n        var cla = this;\n\n        this.request = window.indexedDB.open(database, version);\n         \n        this.request.onerror = function(event) {\n            console.log(\"Error to connect to DB!\");\n        };\n         \n        this.request.onupgradeneeded = function(event) {\n            cla.db = event.target.result;\n            for(var objectname in structur){\n                cla.createObject(structur[objectname]);\n            } \n        }\n\n        this.request.onsuccess = function(event) {\n            cla.db = cla.request.result;\n            callback(true, caller);\n        };\n    }\n\n    add(object: IDatabaseObject, data: any, callback: (success: boolean, caller: any) => void, caller: any){\n        var request = this.db.transaction([object.name], \"readwrite\")\n        .objectStore(object.name)\n        .add(data);\n        \n        request.onsuccess = function(event) {\n           callback(true, caller);\n        };\n        \n        request.onerror = function(event) {\n            callback(false, caller);\n        }\n    }\n\n    read(object: IDatabaseObject, query: IDatabaseQuery, callback: (success: boolean, data: any, caller: any) => void, caller: any){\n        var store = this.db.transaction(object.name, 'readonly').objectStore(object.name);\n        if(query){\n            var cursorQuery = store.index(query.element.name).getAll(query.value);\n        } else{\n            var cursorQuery = store.getAll();\n        }\n        cursorQuery.onerror = ev => {\n            callback(false, null, caller);\n        };\n        cursorQuery.onsuccess = ev => {\n            callback(true, cursorQuery.result, caller);\n        };\n    }\n\n    createObject(object: IDatabaseObject){\n        var objectStore = this.db.createObjectStore(object.name, {keyPath: object.keyPath, autoIncrement: true});\n        for (var elementName in object.elements) {\n            this.createElement(object.elements[elementName], objectStore);\n        }\n    }\n\n    createElement(element: IDatabaseObjectElement, objectStore: any){\n        objectStore.createIndex(element.name, element.name, { unique: element.unique });\n    }\n\n}","export class Videogrid{\n\n    recalculateLayout() {\n        const gallery = document.getElementById(\"video-area\");\n        const aspectRatio = 4 / 3;\n        const screenWidth = gallery.offsetWidth;\n        const screenHeight = gallery.offsetHeight;\n        const videoCount = $(gallery).find(\".video-item:not(.unconnected)\").length;\n\n        // or use this nice lib: https://github.com/fzembow/rect-scaler\n        function calculateLayout(\n            containerWidth: number,\n            containerHeight: number,\n            videoCount: number,\n            aspectRatio: number\n        ): { width: number; height: number; cols: number } {\n            let bestLayout = {\n                area: 0,\n                cols: 0,\n                rows: 0,\n                width: 0,\n                height: 0\n            };\n\n            // brute-force search layout where video occupy the largest area of the container\n            for (let cols = 1; cols <= videoCount; cols++) {\n                const rows = Math.ceil(videoCount / cols);\n                const hScale = containerWidth / (cols * aspectRatio);\n                const vScale = containerHeight / rows;\n                let width;\n                let height;\n                if (hScale <= vScale) {\n                    width = Math.floor(containerWidth / cols);\n                    height = Math.floor(width / aspectRatio);\n                } else {\n                    height = Math.floor(containerHeight / rows);\n                    width = Math.floor(height * aspectRatio);\n                }\n                const area = width * height;\n                if (area > bestLayout.area) {\n                    bestLayout = {\n                    area,\n                    width,\n                    height,\n                    rows,\n                    cols\n                    };\n                }\n            }\n            return bestLayout;\n        }\n\n        const { width, height, cols } = calculateLayout(\n            screenWidth,\n            screenHeight,\n            videoCount,\n            aspectRatio\n        );\n\n        gallery.style.setProperty(\"--width\", width + \"px\");\n        gallery.style.setProperty(\"--height\", height + \"px\");\n        gallery.style.setProperty(\"--cols\", cols + \"\");\n    }\n\n    init(){\n        var cla = this;\n        window.addEventListener(\"resize\", this.recalculateLayout);\n        this.recalculateLayout();\n        setInterval(function(){\n            cla.recalculateLayout();\n        }, 2000);\n    }\n\n\n}","import { App } from \"../app\";\n\ndeclare var Vue: any;\n\nexport class Lightbox{\n\n\n    app: App;\n    lightboxVueObject: any; \n\n    constructor(app: App){\n        this.app = app;\n        this.setLightboxElements();\n    }\n\n    setLightboxElements(){\n        var cla = this;\n        this.lightboxVueObject = new Vue({\n            el: '#lightbox',\n            data: {\n                image: null,\n                closed: true\n            },\n            methods: {\n                closeLightbox () { \n                    this.closed = true\n                }\n            }\n        })\n    }\n\n    addImage(src: string){\n       this.lightboxVueObject.image = src;\n       this.lightboxVueObject.closed = false;\n    }\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(0);\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}